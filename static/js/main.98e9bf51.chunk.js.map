{"version":3,"sources":["components/Searchbar/Searchbar.jsx","components/ImageGallery/default.jpg","components/ImageGallery/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","services/imgAPI.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","services/scrollTo.js","App.js","index.js"],"names":["Searchbar","state","search","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","this","className","type","autoComplete","autoFocus","placeholder","onChange","React","Component","ImageGalleryItem","webformatURL","tags","largeImageURL","src","alt","data-img","defaultProps","defaultImage","ImageGallery","images","onClick","map","id","Button","axios","defaults","baseURL","params","key","image_type","orientation","per_page","getImg","a","q","page","get","data","hits","alert","propTypes","searchQuery","PropTypes","string","isRequired","number","Loader","isLoading","loading","color","modalRoot","document","querySelector","Modal","handleKeyClose","code","onClose","handleBackdropClose","currentTarget","onImgLoad","window","addEventListener","removeEventListener","createPortal","onLoad","scrollTo","top","documentElement","scrollHeight","behavior","App","error","showModal","largeImg","formSubmitQuery","query","fetchImages","options","then","prevState","catch","finally","onImgClick","dataset","img","nodeName","toggleModal","prevProps","renderBtn","length","nothing","console","log","scroll","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.98e9bf51.chunk.js","sourcesContent":["import React from 'react';\n\nclass Searchbar extends React.Component {\n  state = {\n    search: '',\n  };\n\n  handleChange = e => {\n    this.setState({ search: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    // передача пропа в App\n    this.props.onSubmit(this.state.search);\n\n    this.setState({ search: '' });\n  };\n\n  render() {\n    const { search } = this.state;\n\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={search}\n            onChange={this.handleChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","export default __webpack_public_path__ + \"static/media/default.2e01288c.jpg\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport defaultImage from './default.jpg';\n\nclass ImageGalleryItem extends React.Component {\n  static defaultProps = {\n    webformatURL: defaultImage,\n    largeImageURL: defaultImage,\n  };\n\n  static propTypes = {\n    webformatURL: PropTypes.string.isRequired,\n    tags: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n  };\n\n  render() {\n    const { webformatURL, tags, largeImageURL } = this.props;\n\n    return (\n      <li className=\"ImageGalleryItem\">\n        <img\n          className=\"ImageGalleryItem-image\"\n          src={webformatURL}\n          alt={tags}\n          data-img={largeImageURL}\n        />\n      </li>\n    );\n  }\n}\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nclass ImageGallery extends React.Component {\n  static propTypes = {\n    images: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n      }),\n    ).isRequired,\n  };\n\n  render() {\n    const { images, onClick } = this.props;\n\n    return (\n      <ul onClick={onClick} className=\"ImageGallery\">\n        {images.map(({ id, webformatURL, largeImageURL, tags }) => (\n          <ImageGalleryItem\n            key={id}\n            webformatURL={webformatURL}\n            largeImageURL={largeImageURL}\n            tags={tags}\n          />\n        ))}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\n\nconst Button = ({ onClick }) => {\n  return (\n    <div className=\"btnDiv\">\n      <button className=\"Button\" type=\"button\" onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import axios from 'axios';\nimport PropTypes from 'prop-types';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '19779952-34022b0aec99bb73ff26dde3b';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 12,\n};\n\nconst getImg = async ({ q = '', page = 1 }) => {\n  try {\n    const { data } = await axios.get('', { params: { q, page } });\n    return data.hits;\n  } catch (error) {\n    alert(error);\n    return [];\n  }\n};\n\ngetImg.propTypes = {\n  searchQuery: PropTypes.string.isRequired,\n  page: PropTypes.number.isRequired,\n};\n\nexport default getImg;\n\n// ===============\n// const getImg = ({ q, page = 1 }) => {\n//   return axios.get('', { params: { q, page } }).then(res => res.data.hits);\n// };\n\n// ===============\n// const key = '19779952-34022b0aec99bb73ff26dde3b';\n\n// const getImg = ({ q = '', page = 1 }) => {\n//   return axios.get(\n//     `https://pixabay.com/api/?q=${q}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n//   );\n// };\n\n// getImg(options)\n//  .then(resp => {\n//         this.setState(prevState => ({\n//           images: [...prevState.images, ...resp.data.hits],\n//           page: prevState.page + 1,\n//         }));\n//       })\n//       .catch(error => this.setState({ error }))\n//       .finally(() => this.setState({ isLoading: false }));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PropagateLoader from 'react-spinners/PropagateLoader';\n\nconst Loader = isLoading => {\n  return (\n    <div className=\"loaderDiv\">\n      <PropagateLoader loading={isLoading} color={'red'} />\n    </div>\n  );\n};\n\nLoader.propTypes = {\n  isLoading: PropTypes.bool.isRequired,\n};\n\nexport default Loader;\n","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport Loader from '../Loader';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends React.Component {\n  static propTypes = PropTypes.shape({\n    src: PropTypes.string,\n    alt: PropTypes.string,\n    onClose: PropTypes.func,\n  }).isRequired;\n\n  state = {\n    isLoading: true,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyClose);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyClose);\n  }\n\n  handleKeyClose = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClose = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  onImgLoad = () => {\n    this.setState({ isLoading: false });\n  };\n\n  render() {\n    const { src, alt } = this.props;\n    const { isLoading } = this.state;\n\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClose}>\n        <div className=\"Modal\">\n          <img src={src} alt={alt} onLoad={this.onImgLoad} />\n\n          {isLoading && <Loader isLoading={isLoading} />}\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","const scrollTo = () => {\n  window.scrollTo({\n    top: document.documentElement.scrollHeight,\n    behavior: 'smooth',\n  });\n};\n\nexport default scrollTo;\n","import React from 'react';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport getImg from './services/imgAPI';\nimport Modal from './components/Modal';\nimport Loader from './components/Loader';\nimport scrollTo from './services/scrollTo';\nimport './styles.css';\n\nclass App extends React.Component {\n  state = {\n    images: [],\n    page: 1,\n    searchQuery: '',\n    isLoading: false,\n    error: null,\n    showModal: false,\n    largeImg: { src: '', alt: '' },\n  };\n\n  componentDidMount() {\n    this.fetchImages();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  formSubmitQuery = query => {\n    this.setState({ searchQuery: query, images: [], page: 1, error: null });\n  };\n\n  fetchImages = () => {\n    const { searchQuery, page } = this.state;\n    const q = searchQuery;\n    const options = { q, page };\n    this.setState({ isLoading: true });\n\n    getImg(options)\n      .then(hits => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onImgClick = e => {\n    const src = e.target.dataset.img;\n    const alt = e.target.alt;\n\n    if (e.target.nodeName === 'IMG') {\n      this.setState({ largeImg: { src, alt } });\n    }\n\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const { images, isLoading, showModal, error } = this.state;\n    const { src, alt } = this.state.largeImg;\n    const renderBtn = images.length > 0 && !isLoading;\n    const nothing = images.length === 0;\n    console.log(images);\n\n    return (\n      <div>\n        <Searchbar onSubmit={this.formSubmitQuery} />\n\n        <ImageGallery images={images} onClick={this.onImgClick} />\n\n        {isLoading && <Loader isLoading={isLoading} />}\n\n        {renderBtn && <Button onClick={this.fetchImages} scroll={scrollTo()} />}\n\n        {showModal && <Modal src={src} alt={alt} onClose={this.toggleModal} />}\n\n        {error && <h1>{error}</h1>}\n\n        {nothing && <h2>Nothing, please start your search</h2>}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}